#!/bin/bash
# Manual workflow restoration guide

echo "üîß n8n Workflow Restoration Guide"
echo "=================================="
echo ""
echo "Since the API import isn't working, here's how to manually restore your workflows:"
echo ""
echo "üåê 1. Open n8n: http://localhost:5678"
echo ""
echo "üìÅ 2. Import your workflows manually:"
echo "   Option A - Import from backup file:"
echo "   - Click 'Import from file' in n8n"
echo "   - Select: recovered-workflows.json"
echo ""
echo "   Option B - Import your MCP workflow:"
echo "   - Copy the 'My Workflow.json' content"
echo "   - Paste it into n8n's import dialog"
echo ""
echo "üîë 3. Recreate credentials:"
echo "   - Header Auth account (for Payload CMS API)"
echo "   - OpenAI API key"
echo "   - PostgreSQL credentials (if used)"
echo ""
echo "‚ö° 4. Fix the MCP connection:"
echo "   - Set your MCP workflow to ACTIVE"
echo "   - Verify the SSE endpoint matches:"
echo "     http://host.docker.internal:5678/mcp/754ab685-0173-4eec-a996-1d56f9dc8339/sse"
echo ""
echo "üß™ 5. Test the connection:"
echo "   - Your AI Agent should be able to discover the MCP tools"
echo "   - Test with a simple query"
echo ""
echo "üìç Current Status:"
echo "   ‚úÖ n8n running: http://localhost:5678"
echo "   ‚úÖ Payload CMS running: http://localhost:3001"
echo "   ‚úÖ Environment fixes applied (compression bypass)"
echo "   ‚ö†Ô∏è  Workflows need manual import"
echo "   ‚ö†Ô∏è  Credentials need recreation"
echo ""
echo "üÜò If you need help:"
echo "   - Your original workflow is in: My_Workflow (2).json"
echo "   - Backup workflows are in: recovered-workflows.json"
echo "   - Your n8n data is now properly mounted"
