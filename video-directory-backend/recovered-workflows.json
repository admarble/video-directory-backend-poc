[{"createdAt":"2025-05-27T07:31:13.867Z","updatedAt":"2025-05-27T07:31:13.867Z","id":"q1I1ClyL90L25mf2","name":"AI Video Agent - Best Practice with MCP Client","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"video-agent-mcp-v2","responseMode":"responseNode","options":{}},"id":"webhook-trigger","name":"When webhook received","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[200,300],"webhookId":"video-agent-mcp-v2"},{"parameters":{"model":"gpt-4","options":{"temperature":0.3,"maxTokens":2000},"systemMessage":"You are a specialized AI assistant for video content curation in a developer community.\n\n**Your Tools:**\n- create_video_from_youtube: Process YouTube URLs with AI enhancements\n- get_video_details: Retrieve video information by ID\n- update_video_fields: Modify video metadata and settings\n- search_videos: Find videos using text queries\n- analyze_skill_level: Determine content difficulty level\n- enhance_tags: Generate AI-powered tag suggestions\n\n**Guidelines:**\n1. Always validate YouTube URLs before processing\n2. Use skill levels: beginner, intermediate, advanced\n3. Be conservative about auto-publishing (default: false)\n4. Provide clear explanations of actions taken\n5. Suggest relevant tags and categories\n6. Focus on quality content curation\n\n**Example Workflows:**\n- \"Process this video: [URL]\" → Use create_video_from_youtube\n- \"Find React tutorials\" → Use search_videos\n- \"Update video ABC123 to published\" → Use update_video_fields\n\nAlways explain what you're doing and why."},"id":"ai-agent","name":"Video Curator Agent","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1,"position":[600,300]},{"parameters":{"sseEndpoint":"{{ $vars.VIDEO_DIRECTORY_MCP_ENDPOINT }}","authentication":"bearerAuth","toolsToInclude":"all"},"id":"video-directory-mcp-client","name":"Video Directory MCP Client","type":"@n8n/n8n-nodes-langchain.mcpClientTool","typeVersion":1,"position":[400,200],"credentials":{"mcpBearerTokenAuth":{"id":"video-directory-mcp-auth","name":"Video Directory MCP Auth"}}},{"parameters":{"model":"gpt-4","options":{"temperature":0.1}},"id":"openai-chat-model","name":"OpenAI Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1,"position":[400,400],"credentials":{"openAiApi":{"id":"openai-api-key","name":"OpenAI API"}}},{"parameters":{"sessionIdTemplate":"video-agent-{{ $json.userId || 'anonymous' }}"},"id":"simple-memory","name":"Simple Memory","type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1,"position":[600,400]},{"parameters":{"respondWith":"allIncomingItems","options":{}},"id":"webhook-response","name":"Respond to Webhook","type":"n8n-nodes-base.respondToWebhook","typeVersion":1,"position":[800,300]}],"connections":{"When webhook received":{"main":[[{"node":"Video Curator Agent","type":"main","index":0}]]},"Video Curator Agent":{"main":[[{"node":"Respond to Webhook","type":"main","index":0}]]},"Video Directory MCP Client":{"ai_tool":[[{"node":"Video Curator Agent","type":"ai_tool","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Video Curator Agent","type":"ai_languageModel","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Video Curator Agent","type":"ai_memory","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":null,"versionId":"5f4645c6-c324-460f-bc9b-6144b33c4311","triggerCount":0,"tags":[]},{"createdAt":"2025-05-27T07:31:14.143Z","updatedAt":"2025-05-27T07:31:14.143Z","id":"JAUuTXirrSnyO4Lh","name":"AI Video Agent with MCP Client - 2025","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"video-agent-mcp","responseMode":"responseNode","options":{}},"id":"webhook-trigger","name":"Webhook Trigger","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[200,300]},{"parameters":{"model":"gpt-4","options":{"temperature":0.3,"maxTokens":2000},"systemMessage":"You are an AI assistant specialized in video content curation for a developer/indie hacker community. You have access to powerful video management tools through MCP.\n\nYour capabilities include:\n- Creating video entries from YouTube URLs with AI enhancement\n- Searching and retrieving video content\n- Updating video metadata and settings\n- Analyzing skill levels and enhancing tags\n\nAlways:\n1. Validate YouTube URLs before processing\n2. Provide clear explanations of actions taken\n3. Use appropriate skill levels (beginner/intermediate/advanced)\n4. Suggest relevant tags and categories\n5. Make thoughtful decisions about publishing vs. drafts\n\nBe helpful, thorough, and focused on quality content curation.","messages":{"values":[{"role":"user","content":"{{ $json.query || $json.message || 'Process the provided content' }}\n\nRequest data: {{ JSON.stringify($json) }}"}]}},"id":"ai-agent","name":"AI Video Curator Agent","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1,"position":[400,300]},{"parameters":{"sseEndpoint":"{{ $vars.MCP_SERVER_SSE_ENDPOINT }}","authentication":"bearerAuth","toolsToInclude":"all"},"id":"mcp-client-tool","name":"Video Directory MCP Client","type":"n8n-nodes-langchain.toolMcp","typeVersion":1,"position":[300,200],"credentials":{"mcpBearerTokenAuth":{"id":"mcp-server-auth","name":"MCP Server Auth"}}},{"parameters":{"jsCode":"// Process and format the AI agent response\nconst input = $input.all()[0].json;\n\n// Extract the response content\nconst response = input.response || input.text || input.content || '';\nconst toolCalls = input.tool_calls || [];\n\n// Format successful response\nreturn [{\n  json: {\n    success: true,\n    message: response,\n    toolCalls: toolCalls.length,\n    timestamp: new Date().toISOString(),\n    agent: 'video-curator-mcp'\n  }\n}];"},"id":"format-response","name":"Format Response","type":"n8n-nodes-base.code","typeVersion":2,"position":[600,300]},{"parameters":{"respondWith":"allIncomingItems","options":{}},"id":"webhook-response","name":"Webhook Response","type":"n8n-nodes-base.respondToWebhook","typeVersion":1,"position":[800,300]}],"connections":{"Webhook Trigger":{"main":[[{"node":"AI Video Curator Agent","type":"main","index":0}]]},"AI Video Curator Agent":{"main":[[{"node":"Format Response","type":"main","index":0}]]},"Format Response":{"main":[[{"node":"Webhook Response","type":"main","index":0}]]},"Video Directory MCP Client":{"main":[[{"node":"AI Video Curator Agent","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":null,"versionId":"5434154c-f926-4d37-873f-03cf4832c934","triggerCount":0,"tags":[]},{"createdAt":"2025-05-27T07:31:14.209Z","updatedAt":"2025-05-27T07:31:14.209Z","id":"5Z1HwGf3BbK1eFnn","name":"AI Video Curation Agent","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"video-agent","responseMode":"responseNode","options":{}},"id":"webhook-trigger","name":"Webhook Trigger","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[240,300]},{"parameters":{"model":"gpt-4","options":{"temperature":0.3},"messages":{"values":[{"role":"system","content":"You are an AI agent specialized in curating video content for a developer/indie hacker community. Your job is to:\n\n1. Analyze YouTube videos for relevance and quality\n2. Determine appropriate categorization and tagging\n3. Assess skill level requirements\n4. Decide which enhancement tools to use\n5. Make final decisions about publication\n\nYou have access to these tools:\n- create_video: Creates and processes a video entry\n- skill_level_analyzer: Analyzes content difficulty\n- tag_enhancer: Suggests additional relevant tags\n- quality_assessor: Evaluates video quality and relevance\n\nAlways provide reasoning for your decisions and be conservative about publishing low-quality content."},{"role":"user","content":"Process this video: {{ $json.youtubeUrl || $json.youtubeId }}\n\nOptions: {{ JSON.stringify($json.options || {}) }}\n\nPlease analyze and process this video for our developer community. Start by creating the video entry, then decide which additional tools to use based on the initial results."}]},"tools":{"values":[{"name":"create_video","description":"Creates a video entry and performs initial processing including YouTube data fetch, basic categorization, and tagging","parameters":{"type":"object","properties":{"youtubeUrl":{"type":"string","description":"The YouTube URL to process"},"enhanceTags":{"type":"boolean","description":"Whether to perform enhanced tag analysis","default":true},"analyzeSkillLevel":{"type":"boolean","description":"Whether to analyze skill level","default":true},"uploadThumbnail":{"type":"boolean","description":"Whether to upload video thumbnail","default":true},"published":{"type":"boolean","description":"Whether to publish immediately","default":false}},"required":["youtubeUrl"]}},{"name":"skill_level_analyzer","description":"Analyzes video content to determine skill level (beginner/intermediate/advanced)","parameters":{"type":"object","properties":{"title":{"type":"string","description":"Video title"},"description":{"type":"string","description":"Video description"},"tags":{"type":"array","items":{"type":"string"},"description":"Existing tags"},"videoId":{"type":"string","description":"Video ID to update"}},"required":["title","videoId"]}},{"name":"tag_enhancer","description":"Suggests additional relevant tags based on content analysis","parameters":{"type":"object","properties":{"title":{"type":"string","description":"Video title"},"description":{"type":"string","description":"Video description"},"existingTags":{"type":"array","items":{"type":"string"},"description":"Current tags"},"videoId":{"type":"string","description":"Video ID to update"},"createTags":{"type":"boolean","description":"Whether to create new tags","default":true},"confidenceThreshold":{"type":"number","description":"Minimum confidence for suggestions","default":0.75}},"required":["title","videoId"]}},{"name":"quality_assessor","description":"Evaluates video quality and relevance for the community","parameters":{"type":"object","properties":{"videoData":{"type":"object","description":"Complete video data object"},"communityStandards":{"type":"object","description":"Quality thresholds and standards"}},"required":["videoData"]}}]}},"id":"ai-agent","name":"AI Video Curator","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1,"position":[460,300]},{"parameters":{"url":"={{ $('ai-agent').item.json.tool_calls[0].function.name === 'create_video' ? $node.context.PAYLOAD_CMS_URL + '/api/ai-tools/create-video' : '' }}","authentication":"predefinedCredentialType","nodeCredentialType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"={{ $node.context.PAYLOAD_API_KEY }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"youtubeUrl","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.youtubeUrl }}"},{"name":"enhanceTags","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.enhanceTags || true }}"},{"name":"analyzeSkillLevel","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.analyzeSkillLevel || true }}"},{"name":"uploadThumbnail","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.uploadThumbnail || true }}"},{"name":"published","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.published || false }}"}]},"options":{}},"id":"create-video-tool","name":"Create Video Tool","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[660,200]},{"parameters":{"url":"={{ $node.context.PAYLOAD_CMS_URL }}/api/ai-tools/skill-level","authentication":"predefinedCredentialType","nodeCredentialType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"={{ $node.context.PAYLOAD_API_KEY }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"title","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.title }}"},{"name":"description","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.description || '' }}"},{"name":"tags","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.tags || [] }}"},{"name":"videoId","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.videoId }}"}]},"options":{}},"id":"skill-level-tool","name":"Skill Level Tool","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[660,300]},{"parameters":{"url":"={{ $node.context.PAYLOAD_CMS_URL }}/api/ai-tools/enhanced-tags","authentication":"predefinedCredentialType","nodeCredentialType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Authorization","value":"={{ $node.context.PAYLOAD_API_KEY }}"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"title","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.title }}"},{"name":"description","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.description || '' }}"},{"name":"existingTags","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.existingTags || [] }}"},{"name":"videoId","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.videoId }}"},{"name":"createTags","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.createTags || true }}"},{"name":"confidenceThreshold","value":"={{ $('ai-agent').item.json.tool_calls[0].function.arguments.confidenceThreshold || 0.75 }}"}]},"options":{}},"id":"tag-enhancer-tool","name":"Tag Enhancer Tool","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[660,400]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"create_video","leftValue":"={{ $('ai-agent').item.json.tool_calls[0].function.name }}","rightValue":"create_video","operator":{"type":"string","operation":"equals"}},{"id":"skill_level_analyzer","leftValue":"={{ $('ai-agent').item.json.tool_calls[0].function.name }}","rightValue":"skill_level_analyzer","operator":{"type":"string","operation":"equals"}},{"id":"tag_enhancer","leftValue":"={{ $('ai-agent').item.json.tool_calls[0].function.name }}","rightValue":"tag_enhancer","operator":{"type":"string","operation":"equals"}}],"combinator":"or"},"options":{}},"id":"tool-router","name":"Tool Router","type":"n8n-nodes-base.switch","typeVersion":3,"position":[460,500]},{"parameters":{"respondWith":"allIncomingItems","options":{}},"id":"webhook-response","name":"Webhook Response","type":"n8n-nodes-base.respondToWebhook","typeVersion":1,"position":[860,300]}],"connections":{"Webhook Trigger":{"main":[[{"node":"AI Video Curator","type":"main","index":0}]]},"AI Video Curator":{"main":[[{"node":"Tool Router","type":"main","index":0}]]},"Tool Router":{"main":[[{"node":"Create Video Tool","type":"main","index":0}],[{"node":"Skill Level Tool","type":"main","index":0}],[{"node":"Tag Enhancer Tool","type":"main","index":0}]]},"Create Video Tool":{"main":[[{"node":"Webhook Response","type":"main","index":0}]]},"Skill Level Tool":{"main":[[{"node":"Webhook Response","type":"main","index":0}]]},"Tag Enhancer Tool":{"main":[[{"node":"Webhook Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":null,"versionId":"e5aa79fd-15e0-46de-9157-c62c745fad37","triggerCount":0,"tags":[]},{"createdAt":"2025-05-27T07:31:14.315Z","updatedAt":"2025-05-27T07:31:14.315Z","id":"NkAteQcQ549G9QgN","name":"Simple AI Video Curation Agent (Fixed)","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"video-agent","responseMode":"responseNode","options":{"noResponseBody":false}},"id":"webhook-trigger","name":"Video Agent Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[240,300],"webhookId":"video-agent"},{"parameters":{"conditions":{"options":{"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"conditions":[{"id":"has-youtube-url","leftValue":"={{ $json.body.youtubeUrl }}","rightValue":"","operator":{"type":"string","operation":"isNotEmpty"}}],"combinator":"and"},"options":{}},"id":"validate-input","name":"Validate Input","type":"n8n-nodes-base.if","typeVersion":2,"position":[440,300]},{"parameters":{"url":"http://localhost:3001/api/ai-tools/create-video","authentication":"predefinedCredentialType","nodeCredentialType":"httpHeaderAuth","sendHeaders":true,"sendBody":true,"contentType":"json","jsonBody":"={\n  \"youtubeUrl\": {{ JSON.stringify($json.body.youtubeUrl) }},\n  \"enhanceTags\": {{ $json.body.options?.enhanceTags ?? true }},\n  \"analyzeSkillLevel\": {{ $json.body.options?.analyzeSkillLevel ?? true }},\n  \"uploadThumbnail\": {{ $json.body.options?.uploadThumbnail ?? true }},\n  \"published\": {{ $json.body.options?.published ?? false }}\n}","options":{"timeout":120000,"retry":{"enabled":true,"maxTries":2}}},"id":"create-video","name":"Create Video via Payload API","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[640,200]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":"true","type":"boolean"},{"id":"data","name":"data","value":"={{ $json }}","type":"object"},{"id":"message","name":"message","value":"Video processed successfully","type":"string"},{"id":"videoId","name":"videoId","value":"={{ $json.video?.id }}","type":"string"},{"id":"published","name":"published","value":"={{ $json.video?.published ?? false }}","type":"boolean"}]},"options":{}},"id":"format-success","name":"Format Success Response","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[840,200]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":"false","type":"boolean"},{"id":"error","name":"error","value":"Invalid input: YouTube URL is required","type":"string"},{"id":"code","name":"code","value":"INVALID_INPUT","type":"string"}]},"options":{}},"id":"format-error","name":"Format Error Response","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[640,400]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":"false","type":"boolean"},{"id":"error","name":"error","value":"={{ $json.message || 'API request failed' }}","type":"string"},{"id":"details","name":"details","value":"={{ $json }}","type":"object"},{"id":"code","name":"code","value":"API_ERROR","type":"string"}]},"options":{}},"id":"format-api-error","name":"Format API Error","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[840,300]},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":"={{ $json.success ? 200 : 400 }}"}},"id":"webhook-response","name":"Send Response","type":"n8n-nodes-base.respondToWebhook","typeVersion":1,"position":[1040,300]}],"connections":{"Video Agent Webhook":{"main":[[{"node":"Validate Input","type":"main","index":0}]]},"Validate Input":{"main":[[{"node":"Create Video via Payload API","type":"main","index":0}],[{"node":"Format Error Response","type":"main","index":0}]]},"Create Video via Payload API":{"main":[[{"node":"Format Success Response","type":"main","index":0}]],"error":[[{"node":"Format API Error","type":"main","index":0}]]},"Format Success Response":{"main":[[{"node":"Send Response","type":"main","index":0}]]},"Format Error Response":{"main":[[{"node":"Send Response","type":"main","index":0}]]},"Format API Error":{"main":[[{"node":"Send Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":null,"versionId":"8e0a1131-dc02-4488-bbc4-ae73d6670ac0","triggerCount":0,"tags":[]},{"createdAt":"2025-05-27T07:31:14.453Z","updatedAt":"2025-05-27T07:31:14.453Z","id":"MYE5B0ZLOR8bcCIi","name":"Simple AI Video Curation Agent (Response Fixed)","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"video-agent","responseMode":"responseNode","options":{"noResponseBody":false}},"id":"webhook-trigger","name":"Video Agent Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[240,300],"webhookId":"video-agent"},{"parameters":{"conditions":{"options":{"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"conditions":[{"id":"has-youtube-url","leftValue":"={{ $json.youtubeUrl }}","rightValue":"","operator":{"type":"string","operation":"isNotEmpty"}}],"combinator":"and"},"options":{}},"id":"validate-input","name":"Validate Input","type":"n8n-nodes-base.if","typeVersion":2,"position":[440,300]},{"parameters":{"url":"http://host.docker.internal:3001/api/ai-tools/create-video","authentication":"predefinedCredentialType","nodeCredentialType":"httpHeaderAuth","sendHeaders":true,"sendBody":true,"contentType":"json","jsonBody":"={\n  \"youtubeUrl\": {{ JSON.stringify($json.youtubeUrl) }},\n  \"enhanceTags\": {{ $json.options?.enhanceTags ?? true }},\n  \"analyzeSkillLevel\": {{ $json.options?.analyzeSkillLevel ?? true }},\n  \"uploadThumbnail\": {{ $json.options?.uploadThumbnail ?? true }},\n  \"published\": {{ $json.options?.published ?? false }}\n}","options":{"timeout":120000,"retry":{"enabled":true,"maxTries":2},"response":{"response":{"neverError":true}}}},"id":"create-video","name":"Create Video via Payload API","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[640,200]},{"parameters":{"conditions":{"options":{"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"conditions":[{"id":"api-success","leftValue":"={{ $json.success }}","rightValue":true,"operator":{"type":"boolean","operation":"equal"}}],"combinator":"and"},"options":{}},"id":"check-api-response","name":"Check API Response","type":"n8n-nodes-base.if","typeVersion":2,"position":[840,200]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":true,"type":"boolean"},{"id":"message","name":"message","value":"Video processed successfully","type":"string"},{"id":"videoId","name":"videoId","value":"={{ $json.videoId }}","type":"string"},{"id":"video","name":"video","value":"={{ $json.video }}","type":"object"},{"id":"processing","name":"processing","value":"={{ $json.processing }}","type":"object"},{"id":"results","name":"results","value":"={{ $json.results }}","type":"object"},{"id":"published","name":"published","value":"={{ $json.video.published }}","type":"boolean"}]},"options":{}},"id":"format-success","name":"Format Success Response","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1040,120]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":false,"type":"boolean"},{"id":"error","name":"error","value":"={{ $json.error || 'API processing failed' }}","type":"string"},{"id":"details","name":"details","value":"={{ $json }}","type":"object"},{"id":"code","name":"code","value":"API_PROCESSING_ERROR","type":"string"}]},"options":{}},"id":"format-api-error","name":"Format API Processing Error","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1040,280]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":false,"type":"boolean"},{"id":"error","name":"error","value":"Invalid input: YouTube URL is required","type":"string"},{"id":"code","name":"code","value":"INVALID_INPUT","type":"string"}]},"options":{}},"id":"format-validation-error","name":"Format Validation Error Response","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[640,400]},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":"={{ $json.success ? 200 : 400 }}"}},"id":"webhook-response","name":"Send Response","type":"n8n-nodes-base.respondToWebhook","typeVersion":1,"position":[1240,200]}],"connections":{"Video Agent Webhook":{"main":[[{"node":"Validate Input","type":"main","index":0}]]},"Validate Input":{"main":[[{"node":"Create Video via Payload API","type":"main","index":0}],[{"node":"Format Validation Error Response","type":"main","index":0}]]},"Create Video via Payload API":{"main":[[{"node":"Check API Response","type":"main","index":0}]]},"Check API Response":{"main":[[{"node":"Format Success Response","type":"main","index":0}],[{"node":"Format API Processing Error","type":"main","index":0}]]},"Format Success Response":{"main":[[{"node":"Send Response","type":"main","index":0}]]},"Format API Processing Error":{"main":[[{"node":"Send Response","type":"main","index":0}]]},"Format Validation Error Response":{"main":[[{"node":"Send Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":null,"versionId":"6abb5609-83f9-4f96-bc6c-b0c4f7aac71a","triggerCount":0,"tags":[]},{"createdAt":"2025-05-27T07:31:14.485Z","updatedAt":"2025-05-27T07:31:14.485Z","id":"zSxqkZ0yoFI5f9Cy","name":"Simple AI Video Curation Agent","active":false,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"POST","path":"video-agent","responseMode":"responseNode","options":{"noResponseBody":false}},"id":"webhook-trigger","name":"Video Agent Webhook","type":"n8n-nodes-base.webhook","typeVersion":1,"position":[240,300],"webhookId":"video-agent"},{"parameters":{"conditions":{"options":{"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"conditions":[{"id":"has-youtube-url","leftValue":"={{ $json.youtubeUrl }}","rightValue":"","operator":{"type":"string","operation":"isNotEmpty"}}],"combinator":"and"},"options":{}},"id":"validate-input","name":"Validate Input","type":"n8n-nodes-base.if","typeVersion":2,"position":[440,300]},{"parameters":{"url":"http://host.docker.internal:3001/api/ai-tools/create-video","authentication":"predefinedCredentialType","nodeCredentialType":"httpHeaderAuth","sendHeaders":true,"sendBody":true,"contentType":"json","jsonBody":"={\n  \"youtubeUrl\": {{ JSON.stringify($json.youtubeUrl) }},\n  \"enhanceTags\": {{ $json.options?.enhanceTags ?? true }},\n  \"analyzeSkillLevel\": {{ $json.options?.analyzeSkillLevel ?? true }},\n  \"uploadThumbnail\": {{ $json.options?.uploadThumbnail ?? true }},\n  \"published\": {{ $json.options?.published ?? false }}\n}","options":{"timeout":120000,"retry":{"enabled":true,"maxTries":2}}},"id":"create-video","name":"Create Video via Payload API","type":"n8n-nodes-base.httpRequest","typeVersion":4,"position":[640,200]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":"true","type":"boolean"},{"id":"data","name":"data","value":"={{ $json }}","type":"object"},{"id":"message","name":"message","value":"Video processed successfully","type":"string"},{"id":"videoId","name":"videoId","value":"={{ $json.video?.id }}","type":"string"},{"id":"published","name":"published","value":"={{ $json.video?.published ?? false }}","type":"boolean"}]},"options":{}},"id":"format-success","name":"Format Success Response","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[840,200]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":"false","type":"boolean"},{"id":"error","name":"error","value":"Invalid input: YouTube URL is required","type":"string"},{"id":"code","name":"code","value":"INVALID_INPUT","type":"string"}]},"options":{}},"id":"format-error","name":"Format Error Response","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[640,400]},{"parameters":{"assignments":{"assignments":[{"id":"success","name":"success","value":"false","type":"boolean"},{"id":"error","name":"error","value":"={{ $json.message || 'API request failed' }}","type":"string"},{"id":"details","name":"details","value":"={{ $json }}","type":"object"},{"id":"code","name":"code","value":"API_ERROR","type":"string"}]},"options":{}},"id":"format-api-error","name":"Format API Error","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[840,300]},{"parameters":{"respondWith":"allIncomingItems","options":{"responseCode":"={{ $json.success ? 200 : 400 }}"}},"id":"webhook-response","name":"Send Response","type":"n8n-nodes-base.respondToWebhook","typeVersion":1,"position":[1040,300]}],"connections":{"Video Agent Webhook":{"main":[[{"node":"Validate Input","type":"main","index":0}]]},"Validate Input":{"main":[[{"node":"Create Video via Payload API","type":"main","index":0}],[{"node":"Format Error Response","type":"main","index":0}]]},"Create Video via Payload API":{"main":[[{"node":"Format Success Response","type":"main","index":0}]],"error":[[{"node":"Format API Error","type":"main","index":0}]]},"Format Success Response":{"main":[[{"node":"Send Response","type":"main","index":0}]]},"Format Error Response":{"main":[[{"node":"Send Response","type":"main","index":0}]]},"Format API Error":{"main":[[{"node":"Send Response","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":null,"versionId":"aa57dd86-ebc1-4f1c-9006-27908f7af83b","triggerCount":0,"tags":[]}]